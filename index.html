<!DOCTYPE html>
<html>

<head>
  <title>altruistic hedonic game simulator</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
</head>

<body>

  <div class="centerColumn">
    <h3> Altruistic Hedonic Game Simulator </h3>
    <!-- Introduction -->
    <p>
    Welcome to the altruistic hedonic game simulator! This software is based off the 2016 AAMAS
    <a href="http://trust.sce.ntu.edu.sg/aamas16/pdfs/p251.pdf">paper</a>
    <i>Altruistic Hedonic Games</i> by Nguyen, Rey, Rey, Rothe, and Schend.
    </p>
    <p> This software doesn't work at all on smartphones. Desktop with recent chrome or firefox recommended. </p>
    <p> If you modify the graph or partition or you change the  player type, then make sure you recalculate the scores and stability checks. </p>
    <hr>

    <!-- The box that holds the interactive graph -->
    <div id="outergraphbox">
      <div id="innergraphbox"></div>
    </div>

    <!-- All the buttons and interface -->
    <ul>
      <li> Enter adjacency list: <br>
        <textarea id="graphText" cols="40" rows="5"> </textarea>
        <button type="button" id="drawGraph">Draw!</button>
      </li>
      <li> Enter partition: <br>
        <textarea id="partitionText" cols="40" rows="5"> </textarea>
        <button type="button" id="colorPartition">Color!</button>
      </li>
      <li>
        <p>
        <b>Player type:</b>
        Set all players to be
        <select id="playerType">
          <option>friend-oriented (FO)</option>
          <option>selfish-first (SF)</option>
          <option>equal-treatment (EQ)</option>
          <option>altruistic-treatment (AL)</option>
        </select>.
        </p>

        <!-- explanations of player types -->
        <p id="friendOriented">
        Explanation:
        A player is friend-oriented if she tries to maximize friends and, in the case of a tie, minimize enemies.
        This preference relation is defined by the score function
        \[score_i^{FO}(A) = n | A \cap F_i | - | A \cap E_i | .\]
        </p>
        <p id="selfishFirst">
        Explanation:
        A player is selfish-first if she uses her own preferences first and only uses her friends' preferences to break ties.
        This preference relation is defined by the score function
        \[ score_i^{SF}(A) = n^5 score_i^{FO}(A) + \sum_{a \in A \cap F_i} \frac{score_a^{FO}(A)}{|A \cap F_i|} .\]
        </p>
        <p id="equalTreatment">
        Explanation:
        A player is equal-treatment if she puts equal weight on her own opinion and each friend's opinion.
        This preference relation is defined by the score function
        \[ score_i^{EQ}(A) = \sum_{a \in A \cap F_i \cup \{i\}} \frac{score_a^{FO}(A)}{|A \cap F_i \cup \{i\}|} .\]
        </p>
        <p id="altruisticTreatment">
        Explanation:
        A player is altruistic-treatment if she uses her friends' preferences first and only uses her own preferences to break ties.
        This preference relation is defined by the score function
        \[ score_i^{AL}(A) = score_i^{FO}(A) + n^5 \sum_{a \in A \cap F_i} \frac{score_a^{FO}(A)}{|A \cap F_i|} .\]
        </p>
      </li>
      <li>
        <p>
        <b>Stability check:</b>
        Is this partition
        <select id="stabilityType">
          <option>individually rational</option>
          <option>Nash-stable</option>
          <option>individually stable</option>
          <option>contractually individually stable</option>
          <option>strictly popular</option>
          <option>core-stable</option>
          <option>perfect</option>
        </select>?
        <button type="button" id="checkStability"> Check it! </button>
        </p>
        <p id="stabilityResults"> </p>

        <!-- explanations of stability concepts -->
        <p id="individuallyRational">
        Explanation:
        A partition is individually rational if every player is happier in her home coalition than she would be alone.
        In other words, \(\Gamma\) is individually rational iff
        \[ \forall i \in N: \Gamma(i) \geq_i \{i\} .\]
        </p>
        <p id="nashStable">
        Explanation:
        A partition is Nash-stable if every player is happier in her home coalition than she would be in any other coalition.
        In other words, \(\Gamma\) is Nash-stable iff
        \[ \forall i \in N: \forall C \in \Gamma: \Gamma(i) \geq_i C \cup \{i\} .\]
        </p>
        <p id="individuallyStable">
        Explanation:
        A partition is individually stable if every player who wants to transfer to a new coalition is unwanted by someone in that coalition.
        In other words, \(\Gamma\) is individually stable iff
        \[ \forall i \in N: \forall C \in \Gamma: (\Gamma(i) \geq_i C \cup \{i\} \lor (\exists j \in C: C >_j C \cup \{i\} ))  .\]
        </p>
        <p id="contractuallyIndividuallyStable">
        Explanation:
        A partition is contractually individually stable if every player who wants to transfer to a new coalition is either unwanted by someone in that coalition or is not permitted to leave by someone in her home coalition.
        In other words, \(\Gamma\) is contractually individually stable iff
        \[ \forall i \in N: \forall C \in \Gamma: \]
        \[ \Gamma(i) \geq_i C \cup \{i\} \lor (\exists j \in C: C >_j C \cup \{i\} ) \lor (\exists k \in \Gamma(i) \setminus \{i\}: \Gamma(i) >_k \Gamma(i) \setminus \{i\}) .\]
        </p>
        <p id="strictlyPopular">
        Explanation:
        A partition is strictly popular if the majority of players prefer it to any other partition.
        In other words, \(\Gamma\) is strictly popular iff
        \[ \forall \Gamma': |\{ i \in N: \Gamma(i) >_i \Gamma'(i) \}| > |\{ i \in N: \Gamma'(i) >_i \Gamma(i) \}| .\]
        </p>
        <p id="coreStable"> <!-- TODO: add weakly core stable -->
        Explanation:
        A partition is strictly core-stable if there is no possible weakly blocking coalition. (A coalition weakly blocks if everyone is at least as happy in the new one and someone is even happier.)
        In other words, \(\Gamma\) is strictly core-stable iff
        \[ \not\exists C \in N^n: (\forall i \in C: C \geq_i \Gamma(i)) \land (\exists j \in C: C >_j \Gamma(i)) .\]
        </p>
        <p id="perfect">
        Explanation:
        A partition is perfect if every player is in one of their favorite possible coalitions.
        In other words, \(\Gamma\) is perfect iff
        \[ \forall i \in N: \not\exists C \in N^n: C >_i \Gamma(i) .\]
        </p>
      </li>
      <li>
        Compute every node's score of every other coalition in the partition:
        <button type="button" id="computeScores">Compute!</button>
        <p id="scores"> </p>
      </li>
    </ul>


    <hr>
    <!-- footer -->
    <p> Public domain dedication. No rights reserved. Look at the source!</p>
    <p> Hosted on
    <a href="https://github.com/qpwo/altruistic-hedonic-games">Github</a>.
    Using graph library
    <a href="http://sigmajs.org/">sigmajs</a>.
    </p>
  </div>

  <script type="text/javascript" src="sigma/sigma.min.js"></script> <!-- main graph library -->
  <script type="text/javascript" src="sigma/sigma.plugins.dragNodes.js"></script> <!-- plugin for clicking and dragging nodes -->
  <script type="text/javascript" src="myarray.js"></script> <!-- algorithms for arrays -->
  <script type="text/javascript" src="myset.js"></script> <!-- algorithms for sets -->
  <script type="text/javascript" src="altruism.js"></script> <!-- algorithms for altruistic hedonic games -->
  <script type="text/javascript" src="main.js"></script> <!-- code for the buttons etc -->
  <script type="text/javascript" src="mathjax/MathJax.js?config=default"></script> <!-- makes pretty math rendering -->

</body>
</html>
